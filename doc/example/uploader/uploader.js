(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{105:function(s,t,a){"use strict";a.r(t);var v=function(){var s=this.$createElement;this._self._c;return this._m(0)};v._withStripped=!0;var _={methods:{afterAdd:function(s){console.dir(s)}}},r=a(0),e=Object(r.a)(_,v,[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",[a("h1",[s._v("Uploader (文件上传)")]),s._v(" "),a("p",[s._v("支持多文件上传，支持图片预览，图片删除等功能")]),s._v(" "),a("hr"),s._v(" "),a("h2",[s._v("示例")]),s._v(" "),a("h3",[s._v("基本使用")]),s._v(" "),a("p",[s._v("绑定after-add事件，回调参数为Files：选择的图片组成的 "),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("包装File对象")]),s._v(" 数组，拿到"),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("包装File对象")]),s._v("后可自行完成上传逻辑，也可设置auto属性自动上传（后面有示例会讲），亦可调用组件示例的start()方法上传（后面有示例会讲）")]),s._v(" "),a("p",[s._v("阐述概念：在html5中或者说javascript中原生的File对象称为："),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("原生File对象")]),s._v("，组件对其进行了二次包装，将其称之为"),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("包装File对象")])]),s._v(" "),a("p",[s._v("原生File对象"),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/File"}},[s._v("参见这份文档")]),s._v("，或自行查询")]),s._v(" "),a("p",[s._v("包装File对象支持的属性参见下文表格")]),s._v(" "),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[s._v("名称")]),s._v(" "),a("th",[s._v("说明")]),s._v(" "),a("th",[s._v("类型")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("name")]),s._v(" "),a("td",[s._v("文件名")]),s._v(" "),a("td",[s._v("string")])]),s._v(" "),a("tr",[a("td",[s._v("size")]),s._v(" "),a("td",[s._v("文件大小")]),s._v(" "),a("td",[s._v("number")])]),s._v(" "),a("tr",[a("td",[s._v("type")]),s._v(" "),a("td",[s._v("文件类型")]),s._v(" "),a("td",[s._v("string")])]),s._v(" "),a("tr",[a("td",[s._v("lastModified")]),s._v(" "),a("td",[s._v("最近修改时间戳")]),s._v(" "),a("td",[s._v("number")])]),s._v(" "),a("tr",[a("td",[s._v("lastModifiedDate")]),s._v(" "),a("td",[s._v("最近修改日期")]),s._v(" "),a("td",[s._v("Date")])]),s._v(" "),a("tr",[a("td",[s._v("url")]),s._v(" "),a("td",[s._v("文件在磁盘上的绝对地址，通过URL.createObjectURL()实现")]),s._v(" "),a("td",[s._v("string")])]),s._v(" "),a("tr",[a("td",[s._v("base64")]),s._v(" "),a("td",[s._v("文件转base64后的值")]),s._v(" "),a("td",[s._v("string")])]),s._v(" "),a("tr",[a("td",[s._v("status")]),s._v(" "),a("td",[s._v("文件的状态，包括：ready，uploading，success，error")]),s._v(" "),a("td",[s._v("string")])]),s._v(" "),a("tr",[a("td",[s._v("progress")]),s._v(" "),a("td",[s._v("文件上传进度，值为[0, 100]")]),s._v(" "),a("td",[s._v("number")])]),s._v(" "),a("tr",[a("td",[s._v("file")]),s._v(" "),a("td",[s._v("原生File对象")]),s._v(" "),a("td",[s._v("File")])])])]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@after-add")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"afterAdd"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"javascript"}},[s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n      afterAdd (files) {\n        "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 此时可以自行将文件上传至服务器")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".dir(files)\n      }\n    }\n  }\n")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("文件类型")]),s._v(" "),a("p",[s._v("通过accept属性指定可选择的文件类型，accept属性同原生 "),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v('input[type="file"]')]),s._v(" 标签上的accept属性，取值"),a("a",{attrs:{href:"https://www.w3school.com.cn/media/media_mimeref.asp"}},[s._v("参考这篇文章")]),s._v("。默认只支持选择图片文件，accept的默认值为 "),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("image/*")])]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("accept")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"image/png"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("图片预览")]),s._v(" "),a("p",[s._v("preview属性设置为true，开启图片预览功能，当选择的文件类型为图片类型时，支持图片预览，组件内部会根据File对象中的type属性来判断是否为图片类型")]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("preview")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("文件多选")]),s._v(" "),a("p",[s._v("multiple属性设置为true，可以一次选择多个文件")]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("multiple")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("preview")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("最大上传数量")]),s._v(" "),a("p",[s._v("默认一次最多选择10个文件，通过max-count属性指定最大上传数量，取值为大于0的整数")]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("multiple")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("preview")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":max-count")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"2"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("预览图的删除及删除动作")]),s._v(" "),a("p",[s._v("默认预览图支持删除，removable设置为false可以禁止删除预览图")]),s._v(" "),a("p",[s._v("默认有两种动作可以删除预览图：")]),s._v(" "),a("ul",[a("li",[s._v("一种是点击预览图右上角的删除按钮；")]),s._v(" "),a("li",[s._v("一种是长按预览图然后拖拽至页面底部垃圾箱中松手删除")])]),s._v(" "),a("p",[s._v("可以通过remove-action属性来控制删除动作，可选值有三种：click、drag、both，默认值为both")]),s._v(" "),a("ul",[a("li",[s._v("click对应点击删除按钮")]),s._v(" "),a("li",[s._v("drag对应拖拽删除")]),s._v(" "),a("li",[s._v("both即两者均可")])]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s._v("  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("\x3c!-- 禁止删除 --\x3e")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('\x3c!--\n <kw-uploader multiple preview :removable="false"></kw-uploader>\n --\x3e')]),s._v("\n "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("multiple")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("preview")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("remove-action")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"drag"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("限制文件大小")]),s._v(" "),a("p",[s._v("默认上传的文件最大为1024 * 1024 * 10（10MB），超过最大限制的文件组件会过滤掉，不会被上传，可以通过max-size来指定最大文件大小")]),s._v(" "),a("p",[s._v("选择的文件超过最大限制时会触发exceed事件，回调参数为原生File对象")]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("multiple")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("preview")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":max-size")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"2000000"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@exceed")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"handleExceed"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"javascript"}},[s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n      handleExceed (file) {\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$toast("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`上传的"),a("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${file.name}")]),s._v("文件太大`")]),s._v(")\n      }\n    }\n  }\n")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("过滤文件")]),s._v(" "),a("p",[s._v("上面的例子中：max-size和accept属性分别对文件的大小和文件的类型做出了具体的限制，你还可以通过before-add属性来实现对文件的自定义过滤")]),s._v(" "),a("p",[s._v("before-add属性需要你传入一个函数，每选择一个文件，在该文件被添加到组件的files数组之前，函数都会被调用，并会向函数注入一个当前文件的原生File对象作为参数，函数内部可以通过返回一个boolean值来实现对文件的过滤，返回true则会被添加至files数组等待上传，反之不会。")]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("multiple")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("preview")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":before-add")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"beforeAdd"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"actionscript"}},[s._v("\n  export "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    methods: {\n      beforeAdd (file) {\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" maxSize = "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1024")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1024")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (file.size > maxSize) {\n          "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$toast(`您选择的文件超过了 ${maxSize / ("),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1024")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1024")]),s._v(")}MB`)\n          "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("\n        }\n\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n      }\n    }\n  }\n")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("自动上传")]),s._v(" "),a("p",[s._v("默认文件选择之后不会自动上传，设置auto属性为true，开启文件自动上传，默认为false。同时需要通过action属性指定文件上传的后端服务接口地址，action可以是一个字符串，也可以是一个对象，当为字符串时会被解析为:"),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("{target: action}")]),s._v("形式，其中target属性即代表接口地址。action对象支持的所有可配置项参见下方说明。")]),s._v(" "),a("p",[s._v("对action中比较重要且难理解的属性做以详细说明：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("fileKey：文件上传至接口时的文件参数名，默认为 file，这是一个前后端共同约定的值")])]),s._v(" "),a("li",[a("p",[s._v("fileValue：采用哪种数据格式上传文件，有两种形式")]),s._v(" "),a("p",[s._v("file：代表包装File对象中的file属性指向的原生File对象，此时传递的是二进制文件，request的 Content-Type 为 multipart/form-data")]),s._v(" "),a("p",[s._v("base64：代表包装File对象中的base64属性指向的文件base64的值，此时传递的是普通字符串，request的 Content-Type为 application/json")]),s._v(" "),a("p",[a("em",[a("strong",[s._v("当上传大文件时建议选择file的形式，因为大文件转base64会很耗时，导致卡顿，体验不好")])])])]),s._v(" "),a("li",[a("p",[s._v("extra：上传文件时需要附加传递的数据，因为大多数情况下上传文件也一并会传给接口一些其它的参数，这是可以在该属性中进行指定。如果其为函数，则组件会注入当前的包装File对象后调用函数得到数据")])])]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("multiple")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("preview")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("auto")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":action")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"action"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"javascript"}},[s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("data")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" ({\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("action")]),s._v(": {\n        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("target")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'http://localhost:9999'")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fileKey")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'fileFile'")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("fileValue")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'file'")]),s._v(",\n        extra (file) {\n          "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": file.name,\n            "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v(": file.size\n          }\n        }\n      }\n    })\n  }\n")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("手动上传")]),s._v(" "),a("p",[s._v("上一个示例演示了文件选择完毕后就会立即上传，如想手动控制上传，则可以访问Uploader组件实例上的start()方法进行文件上传")]),s._v(" "),a("p",[s._v("retry()方法可以重试再次上传，上传前一次上传失败的文件")]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("multiple")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("preview")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":action")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"action"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ref")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"uploaderRef"')]),s._v(">")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-uploader")]),s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-button")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"full"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"start"')]),s._v(">")]),s._v("上传"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-button")]),s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-button")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("size")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"full"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"retry"')]),s._v(">")]),s._v("重试"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("kw-button")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"javascript"}},[s._v("\n  "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("data")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-function"}},[a("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" ({\n      "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("action")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'http://localhost:9999'")]),s._v("\n    }),\n    "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n      start () {\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$refs.uploaderRef.start()\n      },\n      retry () {\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$refs.uploaderRef.retry()\n      }\n    }\n  }\n")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("h2",[s._v("API")]),s._v(" "),a("h3",[s._v("Props")]),s._v(" "),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[s._v("名称")]),s._v(" "),a("th",[s._v("描述")]),s._v(" "),a("th",[s._v("类型")]),s._v(" "),a("th",[s._v("可选值")]),s._v(" "),a("th",[s._v("默认值")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("accept")]),s._v(" "),a("td",[s._v('接受的文件类型，同原生input[type="file"]accept属性')]),s._v(" "),a("td",[s._v("string")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("image/*")])]),s._v(" "),a("tr",[a("td",[s._v("multiple")]),s._v(" "),a("td",[s._v("是否支持多选")]),s._v(" "),a("td",[s._v("boolean")]),s._v(" "),a("td",[a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("true")]),s._v(" "),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("false")])]),s._v(" "),a("td",[s._v("false")])]),s._v(" "),a("tr",[a("td",[s._v("preview")]),s._v(" "),a("td",[s._v("是否开启预览")]),s._v(" "),a("td",[s._v("boolean")]),s._v(" "),a("td",[a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("true")]),s._v(" "),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("false")])]),s._v(" "),a("td",[s._v("false")])]),s._v(" "),a("tr",[a("td",[s._v("max-count")]),s._v(" "),a("td",[s._v("最大上传数量")]),s._v(" "),a("td",[s._v("number")]),s._v(" "),a("td",[s._v("大于0的整数")]),s._v(" "),a("td",[s._v("10")])]),s._v(" "),a("tr",[a("td",[s._v("max-size")]),s._v(" "),a("td",[s._v("最大文件大小")]),s._v(" "),a("td",[s._v("number")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("1024 * 1024 * 10（10MB）")])]),s._v(" "),a("tr",[a("td",[s._v("removable")]),s._v(" "),a("td",[s._v("是否可以删除预览图")]),s._v(" "),a("td",[s._v("boolean")]),s._v(" "),a("td",[a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("true")]),s._v(" "),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("false")])]),s._v(" "),a("td",[s._v("true")])]),s._v(" "),a("tr",[a("td",[s._v("remove-action")]),s._v(" "),a("td",[s._v("删除预览图的动作,click：点击预览图右上角的删除按钮；drag：长按预览图然后拖拽至页面底部垃圾箱中松手删除；both：两者均可")]),s._v(" "),a("td",[s._v("string")]),s._v(" "),a("td",[s._v("click/drag/both")]),s._v(" "),a("td",[s._v("both")])]),s._v(" "),a("tr",[a("td",[s._v("auto")]),s._v(" "),a("td",[s._v("是否自动上传")]),s._v(" "),a("td",[s._v("boolean")]),s._v(" "),a("td",[a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("true")]),s._v(" "),a("code",{pre:!0,attrs:{class:"code_inline"}},[s._v("false")])]),s._v(" "),a("td",[s._v("false")])]),s._v(" "),a("tr",[a("td",[s._v("action")]),s._v(" "),a("td",[s._v("配置上传接口地址及细粒度配置，可配置的属性参见下方")]),s._v(" "),a("td",[s._v("string/object")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("-")])]),s._v(" "),a("tr",[a("td",[s._v("before-add")]),s._v(" "),a("td",[s._v("原生File对象被转换为包装File对象之前，即被添加至组件的files属性列表之前的的回调函数，返回false可终止文件读取，即过滤掉该文件，此回调函数常用来实现文件过滤操作")]),s._v(" "),a("td",[s._v("function")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("-")])])])]),s._v(" "),a("h3",[s._v("action配置项")]),s._v(" "),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[s._v("名称")]),s._v(" "),a("th",[s._v("描述")]),s._v(" "),a("th",[s._v("类型")]),s._v(" "),a("th",[s._v("可选值")]),s._v(" "),a("th",[s._v("默认值")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("target")]),s._v(" "),a("td",[s._v("文件上传的后端服务接口地址")]),s._v(" "),a("td",[s._v("string")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("-")])]),s._v(" "),a("tr",[a("td",[s._v("fileKey")]),s._v(" "),a("td",[s._v("文件上传至接口时的文件参数名")]),s._v(" "),a("td",[s._v("string")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("file")])]),s._v(" "),a("tr",[a("td",[s._v("fileValue")]),s._v(" "),a("td",[s._v("采用哪种数据格式上传文件")]),s._v(" "),a("td",[s._v("string")]),s._v(" "),a("td",[s._v("file/base64")]),s._v(" "),a("td",[s._v("file")])]),s._v(" "),a("tr",[a("td",[s._v("extra")]),s._v(" "),a("td",[s._v("上传文件时需要附加传递的数据，如果为函数，则组件会注入当前的包装File对象后调用函数得到数据")]),s._v(" "),a("td",[s._v("object/function")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("{}")])])])]),s._v(" "),a("h3",[s._v("Methods")]),s._v(" "),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[s._v("名称")]),s._v(" "),a("th",[s._v("描述")]),s._v(" "),a("th",[s._v("参数")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("start")]),s._v(" "),a("td",[s._v("开始上传文件")]),s._v(" "),a("td",[s._v("-")])]),s._v(" "),a("tr",[a("td",[s._v("retry")]),s._v(" "),a("td",[s._v("重试再次上传")]),s._v(" "),a("td",[s._v("-")])])])]),s._v(" "),a("h3",[s._v("Events")]),s._v(" "),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[s._v("名称")]),s._v(" "),a("th",[s._v("描述")]),s._v(" "),a("th",[s._v("回调参数")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("after-add")]),s._v(" "),a("td",[s._v("所有包装File对象被添加至组件的files属性列表后触发")]),s._v(" "),a("td",[s._v("包装File对象组成的列表")])]),s._v(" "),a("tr",[a("td",[s._v("exceed")]),s._v(" "),a("td",[s._v("选择的文件超过max-size最大文件尺寸的限制时触发")]),s._v(" "),a("td",[s._v("原生File对象")])]),s._v(" "),a("tr",[a("td",[s._v("upload-success")]),s._v(" "),a("td",[s._v("文件上传成功时触发")]),s._v(" "),a("td",[s._v("包装File对象")])]),s._v(" "),a("tr",[a("td",[s._v("upload-fail")]),s._v(" "),a("td",[s._v("文件上传失败时触发")]),s._v(" "),a("td",[s._v("包装File对象")])])])])])}],!1,null,null,null);e.options.__file="example/docs/uploader.md";t.default=e.exports}}]);